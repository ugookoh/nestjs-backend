# NestJS Backend Engineer

## Installing and running the app

```bash
# installation
$ yarn install

# running the app in development / watch mode
$ yarn run start:dev
```

## Testing the application

I added custom unit tests for the `Product` and `User` resolvers. You can easily run and inspect these tests by running the following command

```bash
# unit tests
$ yarn run test
```

# GraphQL API Documentation

In order to see the documentation, simply run the app by following the steps above and then simply navigate to http://localhost:3000/graphql to see playground and the docs. I also provided documentation below.

## User Methods

These are methods that are used to mutate and query the `User` entity

### Create a user

```gql
mutation {
  createUser(
    userInput: { name: "Thomas Stone", age: 20, email: "thomas@gmail.com" }
  ) {
    id
    name
    age
    email
  }
}
```

### Get all users in database with details about the products in their orders

```gql
query {
  getAllUsers {
    id
    name
    age
    email
    order {
      name
      price
    }
  }
}
```

### Get a single user with their orders _(Must have user id)_

```gql
query {
  getUserById(id: "df43e926-67d0-4291-bcc9-1145063b9732") {
    id
    name
    age
    email
    order {
      name
      price
    }
  }
}
```

### Add a product to a user's list of orders _(Must have user id and product id)_

```gql
mutation {
  addProductToUserOrder(
    userOrderInput: {
      userId: "af3bb406-b0e1-4fca-aa6e-0cb73e2843fe"
      productId: "f28faf3e-ad91-41d5-b4f3-412ae52a5e5d"
    }
  ) {
    id
    name
    age
    email
    order {
      name
      price
    }
  }
}
```

<br/>
<br/>

## Product Methods

These are methods that are used to mutate and query the `Product` entity

### Create a product

```gql
mutation {
  createProduct(productInput: { name: "Honey Nut Cherrios", price: 12.99 }) {
    id
    name
    price
  }
}
```

### Get all products in database _(Add the user field to the query to get all the users that ordered said product)_

```gql
query {
  getAllProducts {
    id
    name
    price
  }
}
```

### Get a single product _(Must have user id)_

```gql
query {
  getProductById(id: "b526bd17-aa81-4e73-8faf-b637fdf40e6c") {
    id
    name
    price
  }
}
```

<br/>
<br/>
<br/>
<br/>
<br/>
<br/>

## User and Product types

These are types associated with the `User` and `Product` entity

### UserType

```gql
type User {
  # This is an autogenerated id
  id: String!
  name: String!
  email: String!
  age: Int!
  order: [Product!]
}
```

### ProductType

```gql
type Product {
  # This is an autogenerated id
  id: String!
  name: String!
  price: Float!

  # Users associated with the product, in case we want to see all the users that ordered that product.
  user: [User!]
}
```

## User and Product inputs

These are inputs associated with the `User` and `Product` entity

### `UserInput`

Data to provide in order to create a user

```gql
input UserInput {
  name: String!
  email: String!
  age: Float!
}
```

### `UserOrderInput`

Data to provide in order to insert a product inside a user's order

```gql
input UserOrderInput {
  userId: String!
  productId: String!
}
```

### `ProductInput`

Data to provide in order to create a product

```gql
input ProductInput {
  name: String!
  price: Float!
}
```
